local Rayfield = loadstring(game:HttpGet("https://raw.githubusercontent.com/shlexware/Rayfield/main/source"))()
local Window = Rayfield:CreateWindow({
    Name = "Player Cheats",
    LoadingTitle = "Loading Player Cheats...",
    LoadingSubtitle = "by AKASHI",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = "",
        FileName = "PlayerCheatsConfig"
    },
    Discord = {
        Enabled = false,
        Invite = "",
        RememberJoins = true
    },
    KeySystem = false
})

local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoid = character:WaitForChild("Humanoid")
local flying = false
local bodyVelocity, bodyGyro
local flySpeed = 50

local function startFly()
    if flying then return end
    flying = true
    local rootPart = character:FindFirstChild("HumanoidRootPart")
    if not rootPart then return end
    bodyVelocity = Instance.new("BodyVelocity")
    bodyVelocity.MaxForce = Vector3.new(1e5,1e5,1e5)
    bodyVelocity.Velocity = Vector3.new(0,0,0)
    bodyVelocity.Parent = rootPart
    bodyGyro = Instance.new("BodyGyro")
    bodyGyro.MaxTorque = Vector3.new(1e5,1e5,1e5)
    bodyGyro.CFrame = rootPart.CFrame
    bodyGyro.Parent = rootPart
    game:GetService("RunService"):BindToRenderStep("Fly", Enum.RenderPriority.Character.Value, function()
        if not flying then
            if bodyVelocity then bodyVelocity:Destroy() bodyVelocity=nil end
            if bodyGyro then bodyGyro:Destroy() bodyGyro=nil end
            game:GetService("RunService"):UnbindFromRenderStep("Fly")
            return
        end
        local camCF = workspace.CurrentCamera.CFrame
        local moveVec = Vector3.new()
        local uis = game:GetService("UserInputService")
        if uis:IsKeyDown(Enum.KeyCode.W) then moveVec = moveVec + camCF.LookVector end
        if uis:IsKeyDown(Enum.KeyCode.S) then moveVec = moveVec - camCF.LookVector end
        if uis:IsKeyDown(Enum.KeyCode.A) then moveVec = moveVec - camCF.RightVector end
        if uis:IsKeyDown(Enum.KeyCode.D) then moveVec = moveVec + camCF.RightVector end
        if uis:IsKeyDown(Enum.KeyCode.Space) then moveVec = moveVec + Vector3.new(0,1,0) end
        if uis:IsKeyDown(Enum.KeyCode.LeftControl) then moveVec = moveVec - Vector3.new(0,1,0) end
        if moveVec.Magnitude > 0 then
            moveVec = moveVec.Unit * flySpeed
        end
        bodyVelocity.Velocity = moveVec
        bodyGyro.CFrame = camCF
    end)
end

local function stopFly()
    flying = false
    if bodyVelocity then bodyVelocity:Destroy() bodyVelocity=nil end
    if bodyGyro then bodyGyro:Destroy() bodyGyro=nil end
    game:GetService("RunService"):UnbindFromRenderStep("Fly")
end

local noclipActive = false
local function setNoClip(enabled)
    noclipActive = enabled
    if enabled then
        game:GetService("RunService"):BindToRenderStep("NoClip", Enum.RenderPriority.Character.Value, function()
            for _, part in ipairs(character:GetChildren()) do
                if part:IsA("BasePart") then
                    part.CanCollide = false
                end
            end
        end)
    else
        game:GetService("RunService"):UnbindFromRenderStep("NoClip")
        for _, part in ipairs(character:GetChildren()) do
            if part:IsA("BasePart") then
                part.CanCollide = true
            end
        end
    end
end

local antiAfkConnection
local function setAntiAfk(enabled)
    if enabled then
        if not antiAfkConnection then
            antiAfkConnection = player.Idled:Connect(function()
                local vu = game:GetService("VirtualUser")
                vu:CaptureController()
                vu:ClickButton2(Vector2.new())
            end)
        end
    else
        if antiAfkConnection then
            antiAfkConnection:Disconnect()
            antiAfkConnection = nil
        end
    end
end

local godModeConnection
local function setGodMode(enabled)
    if enabled then
        humanoid.MaxHealth = math.huge
        humanoid.Health = math.huge
        humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, false)
        if godModeConnection then godModeConnection:Disconnect() end
        godModeConnection = humanoid.HealthChanged:Connect(function()
            if humanoid.Health < humanoid.MaxHealth then
                humanoid.Health = humanoid.MaxHealth
            end
        end)
    else
        humanoid.MaxHealth = 100
        humanoid.Health = 100
        humanoid:SetStateEnabled(Enum.HumanoidStateType.Dead, true)
        if godModeConnection then
            godModeConnection:Disconnect()
            godModeConnection = nil
        end
    end
end

Window:CreateToggle({
    Name = "Fly",
    CurrentValue = false,
    Flag = "flyToggle",
    Callback = function(state)
        if state then
            startFly()
        else
            stopFly()
        end
    end
})

Window:CreateToggle({
    Name = "NoClip",
    CurrentValue = false,
    Flag = "noclipToggle",
    Callback = function(state)
        setNoClip(state)
    end
})

Window:CreateToggle({
    Name = "Anti AFK",
    CurrentValue = false,
    Flag = "antiAfkToggle",
    Callback = function(state)
        setAntiAfk(state)
    end
})

Window:CreateToggle({
    Name = "God Mode",
    CurrentValue = false,
    Flag = "godModeToggle",
    Callback = function(state)
        setGodMode(state)
    end
})

Window:CreateSlider({
    Name = "WalkSpeed",
    Min = 16,
    Max = 250,
    Default = humanoid.WalkSpeed,
    Flag = "walkSpeedSlider",
    Callback = function(value)
        humanoid.WalkSpeed = value
    end
})

Window:CreateSlider({
    Name = "JumpPower",
    Min = 50,
    Max = 250,
    Default = humanoid.JumpPower,
    Flag = "jumpPowerSlider",
    Callback = function(value)
        humanoid.JumpPower = value
    end
})

Window:CreateSlider({
    Name = "Fly Speed",
    Min = 10,
    Max = 150,
    Default = flySpeed,
    Flag = "flySpeedSlider",
    Callback = function(value)
        flySpeed = value
    end
})

player.CharacterAdded:Connect(function(char)
    character = char
    humanoid = char:WaitForChild("Humanoid")
    if noclipActive then
        setNoClip(true)
    end
end)
