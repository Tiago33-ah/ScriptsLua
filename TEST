-- ‚öôÔ∏è SERVICES
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local HttpService = game:GetService("HttpService")
local RunService = game:GetService("RunService")
local VirtualUser = game:GetService("VirtualUser")

local player = Players.LocalPlayer

-- üåê Ton Webhook Discord
local WEBHOOK_URL = "https://discord.com/api/webhooks/1390001360514191442/KbpJPN9mvVw3aXGR4cWmvwXbr4YdNcS6p1OMxiw-81iWAGpX96ojd8QtcYEDvhQQWmuJ"

-- üõ†Ô∏è FONCTION : ENVOYER WEBHOOK
local function sendWebhook(isRebirth)
	local data = player:FindFirstChild("Data")
	if not data then return end

	local stats = data:FindFirstChild("PlayerData")
	if not stats then return end

	local clicks = stats:FindFirstChild("Currency")
	local rebirths = stats:FindFirstChild("Currency2")
	if not clicks or not rebirths then return end

	local payload = {
		username = "Stat Tracker",
		embeds = {{
			title = isRebirth and "üî• Rebirth!" or "üìä Player Stats",
			color = isRebirth and 15158332 or 3447003,
			fields = {
				{name = "üë§ Player", value = player.Name, inline = true},
				{name = "üñ±Ô∏è Clicks", value = tostring(clicks.Value), inline = true},
				{name = "üîÅ Rebirths", value = tostring(rebirths.Value), inline = true},
			},
			footer = { text = "LocalScript Webhook" },
			timestamp = DateTime.now():ToIsoDate()
		}}
	}

	pcall(function()
		HttpService:PostAsync(WEBHOOK_URL, HttpService:JSONEncode(payload), Enum.HttpContentType.ApplicationJson)
	end)
end

-- üîÅ D√©tecter un Rebirth (local)
local rebirthEvent = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Rebirth")

rebirthEvent.OnClientEvent:Connect(function()
	sendWebhook(true)
end)

-- ‚è±Ô∏è Webhook auto toutes les 10 secondes
task.spawn(function()
	while true do
		sendWebhook(false)
		task.wait(10)
	end
end)

-- üß© RAYFIELD GUI
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

local Window = Rayfield:CreateWindow({
	Name = "My Auto GUI",
	LoadingTitle = "Loading...",
	LoadingSubtitle = "Webhook + GUI",
	ConfigurationSaving = {
		Enabled = true,
		FolderName = "MyAutoSettings",
		FileName = "UserConfig"
	},
	KeySystem = false
})

-- üìÇ MAIN
local Main = Window:CreateTab("Main", 4483362458)

-- üîò Auto Click
local autoClick = false
local clickConn

Main:CreateToggle({
	Name = "Auto Click",
	CurrentValue = false,
	Callback = function(state)
		autoClick = state
		if autoClick then
			clickConn = RunService.RenderStepped:Connect(function()
				pcall(function()
					ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Clicker"):FireServer()
				end)
			end)
		elseif clickConn then
			clickConn:Disconnect()
			clickConn = nil
		end
	end
})

-- üîò Auto Rebirth
local autoRebirth = false

Main:CreateToggle({
	Name = "Auto Rebirth",
	CurrentValue = false,
	Callback = function(state)
		autoRebirth = state
		task.spawn(function()
			while autoRebirth do
				pcall(function()
					ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Rebirth"):FireServer()
				end)
				task.wait(1)
			end
		end)
	end
})

-- üîò Auto Equip Pet
local autoPet = false

Main:CreateToggle({
	Name = "Auto Equip Best Pet",
	CurrentValue = false,
	Callback = function(state)
		autoPet = state
		task.spawn(function()
			while autoPet do
				pcall(function()
					ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Pet"):FireServer("Equip", {})
				end)
				task.wait(3)
			end
		end)
	end
})

-- üìÇ PLAYER
local PlayerTab = Window:CreateTab("Player", 4483362458)

-- WalkSpeed / JumpPower
local ws, jp = 16, 50

PlayerTab:CreateSlider({
	Name = "WalkSpeed",
	Range = {16, 100},
	Increment = 1,
	Suffix = "Speed",
	CurrentValue = ws,
	Callback = function(val)
		ws = val
		local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
		if hum then hum.WalkSpeed = val end
	end
})

PlayerTab:CreateSlider({
	Name = "JumpPower",
	Range = {50, 200},
	Increment = 5,
	Suffix = "Power",
	CurrentValue = jp,
	Callback = function(val)
		jp = val
		local hum = player.Character and player.Character:FindFirstChildOfClass("Humanoid")
		if hum then hum.JumpPower = val end
	end
})

player.CharacterAdded:Connect(function()
	task.wait(0.2)
	local hum = player.Character:WaitForChild("Humanoid")
	hum.WalkSpeed = ws
	hum.JumpPower = jp
end)

-- ‚ùå NoClip
local noclip = false
local noclipConn

PlayerTab:CreateToggle({
	Name = "NoClip",
	CurrentValue = false,
	Callback = function(state)
		noclip = state
		if noclip then
			noclipConn = RunService.Stepped:Connect(function()
				local char = player.Character
				if char then
					for _, p in pairs(char:GetDescendants()) do
						if p:IsA("BasePart") then p.CanCollide = false end
					end
				end
			end)
		elseif noclipConn then
			noclipConn:Disconnect()
			noclipConn = nil
		end
	end
})

-- üí§ Anti-AFK
PlayerTab:CreateButton({
	Name = "Enable Anti-AFK",
	Callback = function()
		player.Idled:Connect(function()
			VirtualUser:Button2Down(Vector2.zero, workspace.CurrentCamera.CFrame)
			task.wait(1)
			VirtualUser:Button2Up(Vector2.zero, workspace.CurrentCamera.CFrame)
		end)
	end
})
